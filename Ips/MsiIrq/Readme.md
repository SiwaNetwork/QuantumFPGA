# Описание дизайна MSI IRQ
## Содержание

[1. Обзор](#1-context-overview)

[2. Описание интерфейса](#2-interface-description)

[3. Описание дизайна](#3-design-description)

## 1. Обзор
MSI IRQ принимает одиночные прерывания от ядер FPGA и формирует MSI‑сообщения для [AXI‑PCIe моста](https://www.xilinx.com/products/intellectual-property/axi_pcie.html).
Когда сообщение готово — устанавливается запрос и ожидание подтверждения от ядра Xilinx. При нескольких ожидающих прерываниях сообщения отправляются по круговой схеме (round‑robin). Поддерживается до 32 запросов прерывания.

## 2. Описание интерфейса
### 2.1 MSI IRQ IP
Интерфейс:
- Входы системного сброса и системной тактовой
- Входной вектор запросов прерываний
- Вход Enable от контроллера MSI
- Вход Grant от контроллера MSI
- Выход Request Valid к контроллеру MSI
- Выход номера сообщения к контроллеру MSI

![MSI IRQ IP](Additional%20Files/MsiIrqIP.PNG)

Параметры конфигурации:

![MSI IRQ Config](Additional%20Files/MsiIrqConfig.PNG)

## 3. Описание дизайна
Поддерживается до 32 запросов прерывания. Generic‑вход задаёт максимальное число запросов в текущем дизайне. Generic «Level Interrupt» определяет, является ли внешнее прерывание уровневым. Уровневое прерывание чувствительно к уровню, остальные ожидают фронт. Запросы отправляются по очереди (round‑robin) на выход (к AXI‑PCIe мосту), ожидание Grant, затем переход к следующему входу.
