# Описание дизайна PPS Source Selector
## Содержание

[1. Обзор](#1-context-overview)

[2. Описание интерфейса](#2-interface-description)

[3. Описание дизайна](#3-design-description)

## 1. Обзор
PPS Source Selector — полностью аппаратная (FPGA) реализация, определяющая доступные источники PPS и выбирающая источник в соответствии со схемой приоритетов и конфигурацией.
Конфигурирование и мониторинг выполняются через внешний интерфейс AXI4‑Lite (см. набор регистров [Clock Detector](../ClockDetector)). Если конфигурация не подана, выбор выполняется по доступности входов PPS и схеме приоритетов по умолчанию.

## 2. Описание интерфейса
### 2.1 PPS Source Selector IP
Интерфейс:
- Входы системного сброса и системной тактовой
- Вход конфигурации выбора источника PPS (как правило, от внешнего AXI4‑Lite)
- Выход доступных источников PPS (как правило, к внешнему AXI4‑Lite)
- Входы сигналов PPS (SMA, MAC, GPS)
- Выходы выбранных сигналов PPS (в PPS Slave, MAC)

![PPS Source Selector IP](Additional%20Files/PpsSourceSelectorIP.png)

Параметры конфигурации:
- Период системной тактовой
- Порог валидности входного PPS

![PPS Source Selector Conf](Additional%20Files/PpsSourceSelector_Conf.png)

## 3. Описание дизайна
PPS Source Selector обнаруживает и валидирует входы PPS и выбирает источники по конфигурации и приоритетам.
Состоит из двух операций:
- Оценка доступности входов PPS
- Выбор источников PPS

### 3.1 Оценка доступности PPS
Вход PPS считается доступным, если выполняются два условия:
- Период импульса: 1 сек ±10%
- Валиден непрерывно более «Pps Available Threshold» секунд

### 3.2 Выбор источников PPS
Варианты конфигурации выбора Slave PPS:

|Конфигурация|Значение|Описание|
|------------|:------:|--------|
|Auto Select|0|Приоритет по умолчанию: (1) SMA PPS (2) MAC PPS (3) GPS PPS|
|SMA|1|Принудительно SMA PPS → Slave PPS; если недоступен — выход 0|
|MAC|2|Принудительно MAC PPS → Slave PPS; если недоступен — выход 0|
|GPS|3|Принудительно GPS PPS → Slave PPS; если недоступен — выход 0|

Варианты для выбора MAC PPS:

|Конфигурация|Значение|Описание|
|------------|:------:|--------|
|Auto Select|0|Приоритет по умолчанию: (1) SMA PPS (2) GPS PPS|
|SMA|1|Принудительно SMA PPS → MAC PPS; если недоступен — 0|
|GPS|2/3|Принудительно GPS PPS → MAC PPS; если недоступен — 0|

